"use strict";(self.webpackChunkproxy_402_docs=self.webpackChunkproxy_402_docs||[]).push([[595],{5319:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/settings-d6b178dfeb2b390a4ed785b6350b30ca.png"},7739:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"getting-started/verifying-requests","title":"Verifying Requests","description":"When you monetize a URL with Proxy402, you need a way to ensure that all requests to your original content have been properly paid for. To prevent unauthorized access and verify that requests are coming through Proxy402, a special security header is included with every forwarded request.","source":"@site/docs/getting-started/verifying-requests.md","sourceDirName":"getting-started","slug":"/getting-started/verifying-requests","permalink":"/proxy402-docs/getting-started/verifying-requests","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"sidebar_label":"Verify Requests"},"sidebar":"tutorialSidebar","previous":{"title":"Direct Payments","permalink":"/proxy402-docs/getting-started/custom-payment-address"},"next":{"title":"About X402 Protocol","permalink":"/proxy402-docs/getting-started/what-is-x402"}}');var s=r(4848),i=r(8453);const o={sidebar_position:5,sidebar_label:"Verify Requests"},a="Verifying Requests",c={},d=[{value:"The Proxy402-Secret Header",id:"the-proxy402-secret-header",level:2},{value:"Finding Your Secret",id:"finding-your-secret",level:2},{value:"Implementing Verification in Your Server",id:"implementing-verification-in-your-server",level:2},{value:"Node.js (Express)",id:"nodejs-express",level:3},{value:"Python (Flask)",id:"python-flask",level:3},{value:"Go",id:"go",level:3},{value:"Why This Matters",id:"why-this-matters",level:2},{value:"Testing the Verification",id:"testing-the-verification",level:2}];function h(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"verifying-requests",children:"Verifying Requests"})}),"\n",(0,s.jsx)(t.p,{children:"When you monetize a URL with Proxy402, you need a way to ensure that all requests to your original content have been properly paid for. To prevent unauthorized access and verify that requests are coming through Proxy402, a special security header is included with every forwarded request."}),"\n",(0,s.jsx)(t.h2,{id:"the-proxy402-secret-header",children:"The Proxy402-Secret Header"}),"\n",(0,s.jsx)(t.p,{children:"Every time a paid request is forwarded to your original URL, Proxy402 adds a header:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"Proxy402-Secret: YOUR_UNIQUE_SECRET\n"})}),"\n",(0,s.jsx)(t.p,{children:"This secret is unique to your account and serves as proof that the request has passed through Proxy402 and payment has been verified."}),"\n",(0,s.jsx)(t.h2,{id:"finding-your-secret",children:"Finding Your Secret"}),"\n",(0,s.jsx)(t.p,{children:"You can find your Proxy402-Secret in the settings page:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Log in to your Proxy402 dashboard"}),"\n",(0,s.jsx)(t.li,{children:"Navigate to the Settings page"}),"\n",(0,s.jsx)(t.li,{children:'Look for the "Proxy402 Secret" field - this contains your unique secret'}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Settings Page",src:r(5319).A+"",width:"1798",height:"1334"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"If you believe your secret has been compromised, you can regenerate it from the Settings page."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"implementing-verification-in-your-server",children:"Implementing Verification in Your Server"}),"\n",(0,s.jsx)(t.p,{children:"If you own the server that hosts your original content, you should add verification code to check for this header. Here are some examples:"}),"\n",(0,s.jsx)(t.h3,{id:"nodejs-express",children:"Node.js (Express)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"app.get('/your-endpoint', (req, res) => {\n  // Get the secret from the request header\n  const secret = req.headers['proxy402-secret'];\n  \n  // Check if the secret matches your secret from the settings page\n  if (secret !== 'YOUR_SECRET_FROM_SETTINGS') {\n    // Reject unauthorized requests\n    return res.status(403).json({ error: 'Unauthorized access' });\n  }\n  \n  // Process the authorized request\n  res.json({ data: 'Your protected content' });\n});\n"})}),"\n",(0,s.jsx)(t.h3,{id:"python-flask",children:"Python (Flask)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\n@app.route('/your-endpoint')\ndef protected_content():\n    # Get the secret from the request header\n    secret = request.headers.get('Proxy402-Secret')\n    \n    # Check if the secret matches your secret from the settings page\n    if secret != 'YOUR_SECRET_FROM_SETTINGS':\n        # Reject unauthorized requests\n        return jsonify({'error': 'Unauthorized access'}), 403\n    \n    # Process the authorized request\n    return jsonify({'data': 'Your protected content'})\n"})}),"\n",(0,s.jsx)(t.h3,{id:"go",children:"Go"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-go",children:'func handler(w http.ResponseWriter, r *http.Request) {\n    // Get the secret from the request header\n    secret := r.Header.Get("Proxy402-Secret")\n    \n    // Check if the secret matches your secret from the settings page\n    if secret != "YOUR_SECRET_FROM_SETTINGS" {\n        // Reject unauthorized requests\n        http.Error(w, "Unauthorized access", http.StatusForbidden)\n        return\n    }\n    \n    // Process the authorized request\n    w.Header().Set("Content-Type", "application/json")\n    w.Write([]byte(`{"data": "Your protected content"}`))\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"why-this-matters",children:"Why This Matters"}),"\n",(0,s.jsx)(t.p,{children:"Without this verification:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Someone could discover your original URL and bypass the payment system"}),"\n",(0,s.jsx)(t.li,{children:"You wouldn't be able to distinguish between paid and unpaid requests"}),"\n",(0,s.jsx)(t.li,{children:"Your monetization strategy could be compromised"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"By implementing this simple verification check, you ensure that only properly paid requests from Proxy402 can access your content."}),"\n",(0,s.jsx)(t.h2,{id:"testing-the-verification",children:"Testing the Verification"}),"\n",(0,s.jsx)(t.p,{children:"You can test this by:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Setting up a simple server with verification code"}),"\n",(0,s.jsx)(t.li,{children:"Monetizing its URL with Proxy402"}),"\n",(0,s.jsx)(t.li,{children:"Trying to access the original URL directly (should be rejected)"}),"\n",(0,s.jsx)(t.li,{children:"Accessing through Proxy402 with payment (should succeed)"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This provides a complete security system for your monetized content."})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>a});var n=r(6540);const s={},i=n.createContext(s);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);